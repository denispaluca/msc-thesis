% !TeX root = ../main.tex
% Add the above to each chapter to make compiling the PDF easier in some editors.

\chapter{Background and Related Work}\label{chapter:background}
This chapter introduces the technical background and related work for the thesis. It establishes the foundation for the thesis by introducing the concepts of blockchain, smart contracts and specifically smart contracts on the Algorand blockchain network. Furthermore, challenges related to smart contract security and testing are explored, underlining the importance of fuzzing as a relatively novel testing tool in the space. Existing projects in the field of smart contract fuzzing are examined, with the focus on deriving evaluation methods for our own fuzzer.

\section{Blockchain}
Bitcoin was first introduced in 2008 by an anonymous person or group of people under the name of Satoshi Nakamoto \cite{nakamoto_bitcoin_2008}. The purpose of the project was to facilitate online payments without them having to go through a financial institution. Previous solutions were hindered by the double-spend problem, where a user can counterfeit the currency if there isn't a trusted central authority keeping track of the different transactions and the balances. Bitcoin solved this problem with a peer-to-peer network. In this network the nodes keep track of all the transactions that have been committed in a public ledger. These transactions are added to into block which are then chained together through cryptographic hashes. The nodes in the network keep track of the longest chain of blocks and accept the longest chain as the valid one. This is called the \textit{proof-of-work} consensus mechanism. The nodes in the network are incentivized to keep the network secure by receiving a reward in the form of newly minted bitcoins for every block they add to the chain. This process is called \textit{mining}. The proof-of-work consensus is computationally expensive, which makes it difficult for an attacker to create a longer chain than the honest nodes. The attacker would have to have more computational power than the rest of the network combined. This is called the 51\% attack. The Bitcoin network has been running for over 10 years and has never been compromised. The Bitcoin network has several limitations, such as the low transaction throughput and the high energy consumption of the proof-of-work consensus mechanism. These limitations have led to the development of new blockchain networks with different consensus mechanisms.

Another interesting feature of Bitcoin that does not have much notoriety is Bitcoin Script. Bitcoin Script is a simple stack-based programming language that is used to define the conditions under which a transaction can be spent. The execution of the script is successful if the stack is empty and failed otherwise. The Bitcoin Script is not Turing-complete, which means that it cannot be used to implement arbitrary programs. Bitcoin Script was not intended to be used for more complex scripts, but it did inspire the creation of new networks that would allow for more complex scripts, later called smart contracts.

\section{Smart Contracts}
The term "Smart Contract" was first coined by Szabo in 1996, to refer to promises between parties and the protocols to perform on these promises stored in digital form \cite{szabo_smart_1996}. This concept was then first connected with blockchain through Ethereum which was proposed by Buterin in 2014 \cite{buterin_ethereum_2014}. Similar to Bitcoin, at the time of its conception Ethereum was also running on a proof-of-work consensus, and it had its own currency named Ether. Ethereum went on to expand on the concept of Bitcoin Scripts by allowing arbitrary Turing-complete code to be run on its network. This allowed for the creation of more complex smart contracts, similar to what Szabo had described earlier. Since the Ethereum network is completely permissionless (meaning anyone can participate without explicit permission from an authority), the addition of smart contracts transformed this network into a world computer.

The model of the Ethereum smart contracts is pretty simple and since Ethereum was the first blockchain network that supported smart contracts many succeeding networks are more or less similar. For this reason, it is interesting to mention how Ethereum smart contracts work and later to mention how Algorand Smart Contracts differ. Each smart contract has its state (the data of the contract), functions (the code of the contract) and an Ethereum account connected to this contract. The state of the contract is stored in the Ethereum blockchain and is accessible to anyone. The account of the contract is not controlled by a user but only by the code of the corresponding contract. The functions of the contract are the code that is executed when the contract is called. These functions have access not only to the state of the contract, but also to the state of the blockchain. This means that the functions can read the state of other contracts and even call their functions. Also, the function has access to the address of the call and the amount of ether that the call may have sent. When a function is called, it is executed by all the nodes in the network. This means that the function is executed in a deterministic way and the result is the same for all the nodes. Because of this, the execution of the function can be expensive for the nodes. Therefore, the caller of the function has to pay a fee for the execution. This fee is calculated based on the amount of computational resources that the function consumes. This means that the more complex the function is, the more expensive it is to execute. The fee is paid in ether and is collected by the nodes that execute the function as an incentive. The fee is also used to prevent denial-of-service attacks, where a malicious user would try to execute a function that consumes a lot of resources and thus make the network unusable.

Allowing anyone to deploy and run arbitrary code on the network has led to the creation of a large ecosystem of decentralized applications (dApps). These dApps are similar to traditional web applications, but they are not controlled by a single entity. Instead, they are controlled by the code that is deployed on the network. This means that the code is immutable and cannot be changed once it is deployed. This is a double-edged sword, as it means that the code cannot be changed if there is a bug or a security vulnerability. Usually smart contracts control large sums of digital currencies or digital assets, which makes them a very attractive target for attackers. For this two reasons combined, it is of utmost importance to ensure the security of the smart contract before they are deployed.


\section{Smart Contract Security}


\section{Algorand}

\subsection*{Algorand Smart Contracts}

\section{Fuzzing}

\section{Related Work}
